== Configurando o FreeSWITCH com MongoDB e CDRStats ==
== Pre-requisitos ==
Para esta solução iremos instalar o MongoDB em conjunto com o CDRStats (www.cdr-stats.org)
=== Tarefas===
* Recompilar o FreeSWITCH com suporte a MongoDB
* Instalar e configurar o MongoDB
* Realizar altereações nas configurações do FreeSWITCH
* Instalar e configurar o CDRStats

==Recompilando o FreeSWITCH==

'''Acesse'''<pre> cd /usr/src/freeswitch </pre>

No arquivo '''modules.conf''' descomente :

<pre>event_handlers/mod_cdr_mongodb</pre>

'''Recompile o FreeSWITCH''''
<pre> /etc/init.d/freeswitch stop </pre>
<pre> make && make install</pre>



==Configurando o FreeSWITCH==

'''Edite''' 
<pre>vi /etc/freeswitch/autoload_configs/modules.conf.xml</pre>

'''Inclua'''
<pre><load module="mod_cdr_mongodb"/></pre>

'''Edite''' 
<pre>vi /etc/freeswitch/autoload_configs/cdr_mongodb.conf.xml</pre>

'''Altere''' <pre><param name="namespace" value="test.cdr"/></pre>
'''Para''' <pre><param name="namespace" value="freeswitch_cdr.cdr"/></pre>
'''Altere''' <pre><param name="log-b-leg" value="false"/></pre>
'''Para''' <pre><param name="log-b-leg" value="true"/></pre>

== Instalando o MongoDB ==

===Atualizando o sistema===
<pre>
yum -y update
yum -y upgrade
</pre>

=== Instalando o MongoDB ===
<pre>
yum install -y mongodb mongodb-server
</pre>

==Configurando o MongoDB==


'''Inicie o FreeSWITCH'''
<pre> /etc/init.d/freeswitch start </pre>

